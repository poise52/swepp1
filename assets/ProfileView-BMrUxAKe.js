import{d as y,A as g,l as w,p as k,c as b,r as f,o as a,b as s,t as o,a as i,F as x,e as S,x as B,n as D,_ as L}from"./index-CPehmCp3.js";import{M}from"./MainLayout-DkIH3z2v.js";import{api as R}from"./api-D6jzAglP.js";const U={class:"profile"},C={class:"profile__info"},V={class:"profile__field"},$={class:"profile__value"},A={class:"profile__field"},E={class:"profile__value"},F={class:"profile__field"},P={class:"profile__value"},z={key:0,class:"profile__loading"},I={key:1,class:"profile__error"},N={key:2,class:"profile__empty"},T={key:3,class:"profile__records"},j={class:"profile__record-info"},q={class:"profile__record-diff"},G={class:"profile__record-meta"},H={class:"profile__record-time"},J=y({__name:"ProfileView",setup(K){const v=B(),r=b(()=>v.getters.currentUser),c=f([]),d=f(!1),_=f(""),m=t=>t?new Date(t).toLocaleDateString("ru-RU"):"",h=t=>{const e=Math.floor(t/60),n=t%60;return`${e}:${n.toString().padStart(2,"0")}`};return g(async()=>{var t;if((t=r.value)!=null&&t.id){d.value=!0,_.value="";try{const e=await R.getUserRecords(r.value.id,10);c.value=e.records}catch{_.value="Ошибка загрузки рекордов"}finally{d.value=!1}}}),(t,e)=>(a(),w(M,null,{default:k(()=>{var n,p,u;return[s("div",U,[e[3]||(e[3]=s("h2",{class:"profile__title"},"Профиль",-1)),s("div",C,[s("div",V,[e[0]||(e[0]=s("span",{class:"profile__label"},"Имя пользователя:",-1)),s("span",$,o((n=r.value)==null?void 0:n.username),1)]),s("div",A,[e[1]||(e[1]=s("span",{class:"profile__label"},"Email:",-1)),s("span",E,o((p=r.value)==null?void 0:p.email),1)]),s("div",F,[e[2]||(e[2]=s("span",{class:"profile__label"},"Дата регистрации:",-1)),s("span",P,o(m((u=r.value)==null?void 0:u.createdAt)),1)])]),e[4]||(e[4]=s("h3",{class:"profile__subtitle"},"Мои рекорды",-1)),d.value?(a(),i("div",z,"Загрузка...")):_.value?(a(),i("div",I,o(_.value),1)):c.value.length===0?(a(),i("div",N,"Рекордов пока нет")):(a(),i("div",T,[(a(!0),i(x,null,S(c.value,l=>(a(),i("div",{key:l.id,class:"profile__record"},[s("div",j,[s("div",q,o(l.difficulty),1),s("div",G,o(l.cols)+"×"+o(l.rows)+" · "+o(l.mines)+" мин ",1)]),s("div",H,o(h(l.time)),1),s("div",{class:D(["profile__record-status",`profile__record-status--${l.won?"won":"lost"}`])},o(l.won?"✓":"✗"),3)]))),128))]))])]}),_:1}))}}),Y=L(J,[["__scopeId","data-v-0de24652"]]);export{Y as default};
